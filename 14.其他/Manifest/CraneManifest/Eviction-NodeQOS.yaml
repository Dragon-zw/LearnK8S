# Eviction-NodeQOS.yaml
apiVersion: ensurance.crane.io/v1alpha1
kind: NodeQOS
metadata:
  name: 'watermark3'
  labels:
    app: 'system'
spec:
  nodeQualityProbe:
    timeoutSeconds: 10
    nodeLocalGet:
      localCacheTTLSeconds: 60
  rules:
    - name: 'cpu-usage'
      avoidanceThreshold: 2
      restoreThreshold: 2
      actionName: 'eviction'
      strategy: 'Preview' # 回避动作策略。当设置为Preview时，将不会被实际执行
      metricRule:
        name: 'cpu_total_usage'
        value: 6000